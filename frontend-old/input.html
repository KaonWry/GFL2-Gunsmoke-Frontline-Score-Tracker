<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gunsmoke Score Tracker - Add Attempt</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Add Attempt</h1>
    <form id="attemptForm">
        <label>
            Player Name:
            <input type="text" name="player_name" required>
        </label>
        <label>
            Score:
            <input type="number" name="score" required min="0">
        </label>
        <label>
            Doll 1:
            <input type="text" name="doll1">
        </label>
        <label>
            Doll 2:
            <input type="text" name="doll2">
        </label>
        <label>
            Doll 3:
            <input type="text" name="doll3">
        </label>
        <label>
            Doll 4:
            <input type="text" name="doll4">
        </label>
        <label>
            Doll 5:
            <input type="text" name="doll5">
        </label>
        <button type="submit">Submit</button>
    </form>
    <div id="result" style="margin-top:1em;"></div>
    <script>
    document.getElementById('attemptForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const form = e.target;
        const data = {
            player_name: form.player_name.value,
            score: form.score.value,
            doll1: form.doll1.value,
            doll2: form.doll2.value,
            doll3: form.doll3.value,
            doll4: form.doll4.value,
            doll5: form.doll5.value
        };
        const resultDiv = document.getElementById('result');
        try {
            const response = await fetch('http://localhost:5000/add_attempt', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            const result = await response.json();
            if (response.ok) {
                resultDiv.textContent = result.message;
                form.reset();
            } else {
                resultDiv.textContent = result.error || 'Error submitting attempt.';
            }
        } catch (err) {
            resultDiv.textContent = 'Network error: ' + err.message;
        }
    });
    </script>
</body>
</html>
